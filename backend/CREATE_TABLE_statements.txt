/* Drop tables if they exist already */
DROP TABLE IF EXISTS Member;
DROP TABLE IF EXISTS Subscription;
DROP TABLE IF EXISTS Account;

/* Create table to store info for different types of subscriptions */
CREATE TABLE IF NOT EXISTS subscription (
    subscription_id SERIAL PRIMARY KEY,
    amount NUMERIC(6,2) NOT NULL,
    name VARCHAR(20) NOT NULL,
    type VARCHAR(20) NOT NULL
);

/* Create table to store account information */
CREATE TABLE IF NOT EXISTS account (
	account_id SERIAL PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE,
    password VARCHAR(50) NOT NULL UNIQUE,
    type VARCHAR(20) NOT NULL
);

/* Create table to store info about members */
CREATE TABLE IF NOT EXISTS member (
	member_id INT PRIMARY KEY,
    first_name VARCHAR(20) NOT NULL,
    last_name VARCHAR(20) NOT NULL,
    email VARCHAR(50) NOT NULL,
	date_of_birth DATE NOT NULL,
	height NUMERIC(5, 2) NOT NULL,
	weight NUMERIC(5, 2) NOT NULL,
	next_pay_date DATE NOT NULL,
	subscription_id INT NOT NULL,
	card_number VARCHAR(20) NOT NULL,
	FOREIGN KEY (subscription_id)
		REFERENCES subscription (subscription_id)
);

/* Create table to store skills */
CREATE TABLE IF NOT EXISTS skill (
	skill_id SERIAL PRIMARY KEY,
    name VARCHAR(20) NOT NULL
);

/* Create table to store members' interests*/
CREATE TABLE IF NOT EXISTS interest (
	member_id INT NOT NULL,
	skill_id INT NOT NULL,
	PRIMARY KEY (member_id, skill_id),
	FOREIGN KEY (member_id)
		REFERENCES member (member_id),
	FOREIGN KEY (skill_id)
		REFERENCES skill (skill_id)
);


/* Sample insertions */
INSERT INTO subscription (amount, name, type) VALUES (30.00, 'Fit Flex', 'Monthly');
INSERT INTO subscription (amount, name, type) VALUES (200.00, 'Fit Elite', 'Annual');
